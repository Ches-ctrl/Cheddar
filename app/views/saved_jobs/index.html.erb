<% if true %>
<% title "Saved Jobs" %>
<article class="flex w-3/4 mx-auto h-full flex-col pb-10 pt-16" data-controller="saved-jobs">
  <div class="divide-y bg-gray-100 dark:bg-zinc-800 divide-gray-100 dark:divide-gray-800">
    <div class="relative flex justify-between gap-x-4 px-4 py-5 sm:px-6 lg:px-8">
      <div class="flex gap-x-4 pr-0 sm:flex-none">
        <div class="flex w-6 z-50 items-center float-start">
          <input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600" data-saved-jobs-target="mainCheckbox">
        </div>
      </div>
      <div class="flex flex-grow items-center">
        <%= link_to "Apply", new_job_application_path('job_ids[]': @records.pluck(:id)), class: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white dark:text-gray-900 shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 opacity-50 cursor-not-allowed", data: { saved_jobs_target: "applyButton" } %>
      </div>
    </div>
    <div class="mx-auto max-w-7xl px-3 sm:px-4 lg:px-6">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="sm:-my-px sm:ml-6 sm:flex sm:space-x-8">
            <a href="#" class="inline-flex items-center border-b-2 border-indigo-500 dark:border-indigo-300 px-1 pt-1 text-sm font-medium text-gray-900 dark:text-white" aria-current="page">Basket</a>
            <a href="#" class="inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-white/10 hover:text-gray-700 dark:hover:text-gray-500">In progress</a>
            <a href="#" class="inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-white/10 hover:text-gray-700 dark:hover:text-gray-500">Applied</a>
            <a href="#" class="inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-white/10 hover:text-gray-700 dark:hover:text-gray-500">Calendar</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ul role="list" class="divide-y divide-gray-100 dark:divide-gray-800">
    <!-- #rename later to jobs for jobs/_job.html.erb -->
    <% @records.each do |opportunity| %>
      <%= render 'opportunities/opportunity', opportunity: %>
    <% end %>
  </ul>
  <%= render 'shared/template/pagination', pagy: @pagy %>
</article>
<% else %>
<div class="container">
  <%= form_tag new_job_application_path, method: :get do %>

    <div class="d-flex align-items-center justify-content-between">
      <h3 id="saved-jobs-index-title">Basket</h3>
    </div>

    <div class="row pt-0">
      <div class="col-9">
        <% @saved_job_ids = @saved_jobs.pluck(:id) %>
          <%= render partial: '/jobs/job_card', collection: @records, as: :job, locals: { include_checkboxes: true }%>
      </div>

      <div class="col-3">
          <%= render partial: 'basket' %>
      </div>
    </div>

  <% end %>
</div>
<% end %>