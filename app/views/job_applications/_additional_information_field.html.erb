<% if question.valid? && question.input? %>
  <%= field_form.input question.attribute,
    hint: question.description&.html_safe,
    label: question.label,
    required: question.required,
    input_html: { 
      value: prefilled_value(question, job_application, last_applicant_answers)
    }
  %>
<% elsif question.valid? && question.select? %>
  <%= field_form.input question.attribute,
    collection: question.options,
    include_blank: true,
    hint: question.description&.html_safe,
    label: question.label,
    required: question.required,
    selected: prefilled_value(question, job_application, last_applicant_answers),
    type: :select
  %>
<% elsif question.valid? && question.multi_select? %>
  <%= field_form.input question.attribute,
    as: :check_boxes,
    collection: question.options,
    hint: question.description&.html_safe,
    label: question.label,
    required: question.required,
    checked: prefilled_value(question, job_application, last_applicant_answers),
    input_html: { 
      class: 'h-5 w-5 my-3 me-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600',
    }
  %>
<% elsif question.valid? && question.textarea? %>
  <%= field_form.input question.attribute,
    hint: question.description&.html_safe,
    label: question.label,
    required: question.required,
    as: :text,
    input_html: {
      class: 'block w-full rounded-md border-0 px-3 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6',
      rows: 5,
      value: prefilled_value(question, job_application, last_applicant_answers)
    }
  %>
<% elsif question.valid? && question.boolean? %>
  <%= field_form.input question.attribute,
    collection: question.boolean_options,
    label: question.label,
    hint: question.description&.html_safe,
    required: question.required,
    selected: prefilled_value(question, job_application, last_applicant_answers)
  %>
<% elsif false && question.valid? && question.radiogroup? %>
  <%= field_form.input question.attribute,
    label: question.label,
    hint: question.description&.html_safe,
    required: question.required,
    input_html: { 
      value: prefilled_value(question, job_application, last_applicant_answers)
    }
  %>
<% elsif question.resume? || question.cover_letter? %>
  <% document = question.resume? ? job_application.resume : job_application.cover_letter %>
  <%= form.input question.attribute,
    as: :file,
    hint: question.description&.html_safe,
    label: question.label,
    required: attachment_required_but_absent?(question, document),
    input_html: { 
      direct_upload: true,
      class: 'block w-full border border-gray-200 shadow-sm rounded-lg text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400
              file:bg-gray-200 file:border-0
              file:me-4
              file:py-1.5 file:px-2
              dark:file:bg-neutral-700 dark:file:text-neutral-400'
    }
  %>
  <%= render "shared/forms/attachments_list", attachments: [document], document_attached: document.attached? %>
<% elsif question.upload? %>
  We don't manage the type of upload yet.
<% else %>
  <%= "Question: #{ question.to_json.html_safe }" %>
<% end %>