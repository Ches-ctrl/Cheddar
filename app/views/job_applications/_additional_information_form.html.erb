<%= simple_form_for job_application, url: application_process_job_application_path, html: { method: :put, class: "md:col-span-2", data: { mandatory_fields_only_target: 'form' } } do |form| %>
  <div class="grid gap-x-6 gap-y-8 sm:max-w-6xl sm:grid-cols-6">
    <% previous_question = nil %>
    <% job_application.application_question_set.questions.each do |question| %>
      <% if different_section?(previous_question, question) %>
        <p class="mt-3 mb-2">
          <h3 class="col-span-full text-3xl text-center font-bold tracking-tight text-indigo-600 dark:text-indigo-400 sm:text-4xl">
            <%= question.section %>
          </h3>
        </p>
      <% end %>
      <div class="col-span-full" data-mandatory-fields-only-target="field" data-required-value="<%= question.required %>">
        <label for="<%= question.attribute %>>" class="block text-sm font-medium leading-6 text-gray-900 dark:text-white"><%= "#{mandatory_field(question)}#{question.attribute.humanize}" %></label>
        <div class="mt-2">
          <%= form.simple_fields_for :additional_info do |field_form| %>
            <%= render 'additional_information_field', job_application:, last_applicant_answers:, question:, form:, field_form: %>
          <% end %>
        </div>
      </div>
      <% previous_question = question %>
    <% end %>
  </div>
  <div class="mt-8 flex">
    <%= form.button :submit, "Next", class: "flex w-full justify-center cursor-pointer rounded-md !bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white dark:text-gray-900 shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" %>
  </div>
<% end %>