import{getAttributeValueByPath as e,warn as t,userAgents as r,invariant as o}from"@algolia/autocomplete-shared";export*from"@algolia/autocomplete-shared/dist/esm/preset-algolia/algoliasearch";export*from"@algolia/autocomplete-shared/dist/esm/preset-algolia/createRequester";var n="__aa-highlight__";var i="__/aa-highlight__";function createAttributeSet(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var t=e;return{get:function get(){return t},add:function add(e){var r=t[t.length-1];(r===null||r===void 0?void 0:r.isHighlighted)===e.isHighlighted?t[t.length-1]={value:r.value+e.value,isHighlighted:r.isHighlighted}:t.push(e)}}}function parseAttribute(e){var t=e.highlightedValue;var r=t.split(n);var o=r.shift();var a=createAttributeSet(o?[{value:o,isHighlighted:false}]:[]);r.forEach((function(e){var t=e.split(i);a.add({value:t[0],isHighlighted:true});t[1]!==""&&a.add({value:t[1],isHighlighted:false})}));return a.get()}function _toConsumableArray$2(e){return _arrayWithoutHoles$2(e)||_iterableToArray$2(e)||_unsupportedIterableToArray$2(e)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$2(e,t){if(e){if(typeof e==="string")return _arrayLikeToArray$2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);r==="Object"&&e.constructor&&(r=e.constructor.name);return r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$2(e,t):void 0}}function _iterableToArray$2(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$2(e){if(Array.isArray(e))return _arrayLikeToArray$2(e)}function _arrayLikeToArray$2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function parseAlgoliaHitHighlight(r){var o=r.hit,n=r.attribute;var i=Array.isArray(n)?n:[n];var a=e(o,["_highlightResult"].concat(_toConsumableArray$2(i),["value"]));if(typeof a!=="string"){process.env.NODE_ENV!=="production"?t(false,'The attribute "'.concat(i.join("."),'" described by the path ').concat(JSON.stringify(i)," does not exist on the hit. Did you set it in `attributesToHighlight`?")+"\nSee https://www.algolia.com/doc/api-reference/api-parameters/attributesToHighlight/"):void 0;a=e(o,i)||""}return parseAttribute({highlightedValue:a})}var a={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var u=new RegExp(/\w/i);var l=/&(amp|quot|lt|gt|#39);/g;var c=RegExp(l.source);function unescape(e){return e&&c.test(e)?e.replace(l,(function(e){return a[e]})):e}function isPartHighlighted(e,t){var r,o;var n=e[t];var i=((r=e[t+1])===null||r===void 0?void 0:r.isHighlighted)||true;var a=((o=e[t-1])===null||o===void 0?void 0:o.isHighlighted)||true;return u.test(unescape(n.value))||a!==i?n.isHighlighted:a}function _typeof$4(e){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(e)}function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach((function(t){_defineProperty$3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$3(e,t,r){t=_toPropertyKey$3(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return _typeof$4(t)==="symbol"?t:String(t)}function _toPrimitive$3(e,t){if(_typeof$4(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$4(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function reverseHighlightedParts(e){return e.some((function(e){return e.isHighlighted}))?e.map((function(t,r){return _objectSpread$3(_objectSpread$3({},t),{},{isHighlighted:!isPartHighlighted(e,r)})})):e.map((function(e){return _objectSpread$3(_objectSpread$3({},e),{},{isHighlighted:false})}))}function parseAlgoliaHitReverseHighlight(e){return reverseHighlightedParts(parseAlgoliaHitHighlight(e))}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if(typeof e==="string")return _arrayLikeToArray$1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);r==="Object"&&e.constructor&&(r=e.constructor.name);return r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function _iterableToArray$1(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _arrayLikeToArray$1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function parseAlgoliaHitSnippet(r){var o=r.hit,n=r.attribute;var i=Array.isArray(n)?n:[n];var a=e(o,["_snippetResult"].concat(_toConsumableArray$1(i),["value"]));if(typeof a!=="string"){process.env.NODE_ENV!=="production"?t(false,'The attribute "'.concat(i.join("."),'" described by the path ').concat(JSON.stringify(i)," does not exist on the hit. Did you set it in `attributesToSnippet`?")+"\nSee https://www.algolia.com/doc/api-reference/api-parameters/attributesToSnippet/"):void 0;a=e(o,i)||""}return parseAttribute({highlightedValue:a})}function parseAlgoliaHitReverseSnippet(e){return reverseHighlightedParts(parseAlgoliaHitSnippet(e))}function _typeof$3(e){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(e)}function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach((function(t){_defineProperty$2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$2(e,t,r){t=_toPropertyKey$2(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return _typeof$3(t)==="symbol"?t:String(t)}function _toPrimitive$2(e,t){if(_typeof$3(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$3(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function createRequester(e,t){function execute(t){return e({searchClient:t.searchClient,queries:t.requests.map((function(e){return e.query}))}).then((function(e){return e.map((function(e,r){var o=t.requests[r],n=o.sourceId,i=o.transformResponse;return{items:e,sourceId:n,transformResponse:i}}))}))}return function createSpecifiedRequester(e){return function requester(r){return _objectSpread$2(_objectSpread$2({requesterId:t,execute:execute},e),r)}}}function getAppIdAndApiKey(e){var t=e.transporter||{},r=t.headers,o=r===void 0?{}:r,n=t.queryParameters,i=n===void 0?{}:n;var a="x-algolia-application-id";var u="x-algolia-api-key";var l=o[a]||i[a];var c=o[u]||i[u];return{appId:l,apiKey:c}}function _typeof$2(e){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(e)}var p=["params"];function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach((function(t){_defineProperty$1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$1(e,t,r){t=_toPropertyKey$1(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return _typeof$2(t)==="symbol"?t:String(t)}function _toPrimitive$1(e,t){if(_typeof$2(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$2(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties(e,t){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,t);var o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){o=i[n];t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}}return r}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,i;for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);r==="Object"&&e.constructor&&(r=e.constructor.name);return r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function fetchAlgoliaResults(e){var t=e.searchClient,a=e.queries,u=e.userAgents,l=u===void 0?[]:u;if(typeof t.addAlgoliaAgent==="function"){var c=[].concat(_toConsumableArray(r),_toConsumableArray(l));c.forEach((function(e){var r=e.segment,o=e.version;t.addAlgoliaAgent(r,o)}))}var s=getAppIdAndApiKey(t),y=s.appId,f=s.apiKey;o(Boolean(y),"The Algolia `appId` was not accessible from the searchClient passed.");o(Boolean(f),"The Algolia `apiKey` was not accessible from the searchClient passed.");return t.search(a.map((function(e){var t=e.params,r=_objectWithoutProperties(e,p);return _objectSpread$1(_objectSpread$1({},r),{},{params:_objectSpread$1({hitsPerPage:5,highlightPreTag:n,highlightPostTag:i},t)})}))).then((function(e){return e.results.map((function(e,t){var r;return _objectSpread$1(_objectSpread$1({},e),{},{hits:(r=e.hits)===null||r===void 0?void 0:r.map((function(r){return _objectSpread$1(_objectSpread$1({},r),{},{__autocomplete_indexName:e.index||a[t].indexName,__autocomplete_queryID:e.queryID,__autocomplete_algoliaCredentials:{appId:y,apiKey:f}})}))})}))}))}var s=createRequester(fetchAlgoliaResults,"algolia");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t=_toPropertyKey(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return _typeof$1(t)==="symbol"?t:String(t)}function _toPrimitive(e,t){if(_typeof$1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$1(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function getAlgoliaFacets(e){o(_typeof$1(e.searchClient)==="object","The `searchClient` parameter is required for getAlgoliaFacets({ searchClient }).");var t=s({transformResponse:function transformResponse(e){return e.facetHits}});var r=e.queries.map((function(e){return _objectSpread(_objectSpread({},e),{},{type:"facet"})}));return t(_objectSpread(_objectSpread({},e),{},{queries:r}))}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function getAlgoliaResults(e){o(_typeof(e.searchClient)==="object","The `searchClient` parameter is required for getAlgoliaResults({ searchClient }).");var t=s({transformResponse:function transformResponse(e){return e.hits}});return t(e)}export{createRequester,fetchAlgoliaResults,getAlgoliaFacets,getAlgoliaResults,parseAlgoliaHitHighlight,parseAlgoliaHitReverseHighlight,parseAlgoliaHitReverseSnippet,parseAlgoliaHitSnippet};

