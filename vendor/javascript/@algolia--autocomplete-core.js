import{createAlgoliaInsightsPlugin as e}from"@algolia/autocomplete-plugin-algolia-insights";import{warn as t,decycle as r,invariant as o,noop as n,flatten as i,getItemsCount as a,generateAutocompleteId as u,userAgents as c}from"@algolia/autocomplete-shared";export*from"@algolia/autocomplete-shared/dist/esm/core";function checkOptions(e){process.env.NODE_ENV!=="production"?t(!e.debug,"The `debug` option is meant for development debugging and should not be used in production."):void 0}function createInternalCancelablePromise(e,t){var r=t;return{then:function then(t,o){return createInternalCancelablePromise(e.then(createCallback(t,r,e),createCallback(o,r,e)),r)},catch:function _catch(t){return createInternalCancelablePromise(e.catch(createCallback(t,r,e)),r)},finally:function _finally(t){t&&r.onCancelList.push(t);return createInternalCancelablePromise(e.finally(createCallback(t&&function(){r.onCancelList=[];return t()},r,e)),r)},cancel:function cancel(){r.isCanceled=true;var e=r.onCancelList;r.onCancelList=[];e.forEach((function(e){e()}))},isCanceled:function isCanceled(){return r.isCanceled===true}}}function createCancelablePromise(e){return createInternalCancelablePromise(new Promise((function(t,r){return e(t,r)})),{isCanceled:false,onCancelList:[]})}createCancelablePromise.resolve=function(e){return cancelable(Promise.resolve(e))};createCancelablePromise.reject=function(e){return cancelable(Promise.reject(e))};function cancelable(e){return createInternalCancelablePromise(e,{isCanceled:false,onCancelList:[]})}function createCallback(e,t,r){return e?function callback(r){return t.isCanceled?r:e(r)}:r}function createCancelablePromiseList(){var e=[];return{add:function add(t){e.push(t);return t.finally((function(){e=e.filter((function(e){return e!==t}))}))},cancelAll:function cancelAll(){e.forEach((function(e){return e.cancel()}))},isEmpty:function isEmpty(){return e.length===0}}}function createConcurrentSafePromise(){var e=-1;var t=-1;var r=void 0;return function runConcurrentSafePromise(o){e++;var n=e;return Promise.resolve(o).then((function(e){if(r&&n<t)return r;t=n;r=e;return e}))}}
/**
 * Returns the next active item ID from the current state.
 *
 * We allow circular keyboard navigation from the base index.
 * The base index can either be `null` (nothing is highlighted) or `0`
 * (the first item is highlighted).
 * The base index is allowed to get assigned `null` only if
 * `props.defaultActiveItemId` is `null`. This pattern allows to "stop"
 * by the actual query before navigating to other suggestions as seen on
 * Google or Amazon.
 *
 * @param moveAmount The offset to increment (or decrement) the last index
 * @param baseIndex The current index to compute the next index from
 * @param itemCount The number of items
 * @param defaultActiveItemId The default active index to fallback to
 */function getNextActiveItemId(e,t,r,o){if(!r)return null;if(e<0&&(t===null||o!==null&&t===0))return r+e;var n=(t===null?-1:t)+e;return n<=-1||n>=r?o===null?null:0:n}function ownKeys$b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$b(Object(r),!0).forEach((function(t){_defineProperty$b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$b(e,t,r){t=_toPropertyKey$b(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return _typeof$b(t)==="symbol"?t:String(t)}function _toPrimitive$b(e,t){if(_typeof$b(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$b(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _typeof$b(e){return _typeof$b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$b(e)}function getNormalizedSources(e,t){var i=[];return Promise.resolve(e(t)).then((function(e){o(Array.isArray(e),(function(){return"The `getSources` function must return an array of sources but returned type ".concat(JSON.stringify(_typeof$b(e)),":\n\n").concat(JSON.stringify(r(e),null,2))}));return Promise.all(e.filter((function(e){return Boolean(e)})).map((function(e){o(typeof e.sourceId==="string","A source must provide a `sourceId` string.");if(i.includes(e.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(e.sourceId)," is not unique."));i.push(e.sourceId);var t={getItemInputValue:function getItemInputValue(e){var t=e.state;return t.query},getItemUrl:function getItemUrl(){},onSelect:function onSelect(e){var t=e.setIsOpen;t(false)},onActive:n,onResolve:n};Object.keys(t).forEach((function(e){t[e].__default=true}));var r=_objectSpread$b(_objectSpread$b({},t),e);return Promise.resolve(r)})))}))}function getCollectionFromActiveItemId(e){var t=e.collections.map((function(e){return e.items.length})).reduce((function(e,t,r){var o=e[r-1]||0;var n=o+t;e.push(n);return e}),[]);var r=t.reduce((function(t,r){return r<=e.activeItemId?t+1:t}),0);return e.collections[r]}function getRelativeActiveItemId(e){var t=e.state,r=e.collection;var o=false;var n=0;var i=0;while(o===false){var a=t.collections[n];if(a===r){o=true;break}i+=a.items.length;n++}return t.activeItemId-i}function getActiveItem(e){var t=getCollectionFromActiveItemId(e);if(!t)return null;var r=t.items[getRelativeActiveItemId({state:e,collection:t})];var o=t.source;var n=o.getItemInputValue({item:r,state:e});var i=o.getItemUrl({item:r,state:e});return{item:r,itemInputValue:n,itemUrl:i,source:o}}
/**
 * Returns a full element id for an autocomplete element.
 *
 * @param autocompleteInstanceId The id of the autocomplete instance
 * @param elementId The specific element id
 * @param source The source of the element, when it needs to be scoped
 */function getAutocompleteElementId(e,t,r){return[e,r===null||r===void 0?void 0:r.sourceId,t].filter(Boolean).join("-").replace(/\s/g,"")}function isOrContainsNode(e,t){return e===t||e.contains(t)}var l=/((gt|sm)-|galaxy nexus)|samsung[- ]|samsungbrowser/i;function isSamsung(e){return Boolean(e&&e.match(l))}function mapToAlgoliaResponse(e){return{results:e,hits:e.map((function(e){return e.hits})).filter(Boolean),facetHits:e.map((function(e){var t;return(t=e.facetHits)===null||t===void 0?void 0:t.map((function(e){return{label:e.value,count:e.count,_highlightResult:{label:{value:e.highlighted}}}}))})).filter(Boolean)}}function getNativeEvent(e){return e.nativeEvent||e}function _typeof$a(e){return _typeof$a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$a(e)}function ownKeys$a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$a(Object(r),!0).forEach((function(t){_defineProperty$a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$a(e,t,r){t=_toPropertyKey$a(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return _typeof$a(t)==="symbol"?t:String(t)}function _toPrimitive$a(e,t){if(_typeof$a(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$a(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function createStore(e,t,r){var o=t.initialState;return{getState:function getState(){return o},dispatch:function dispatch(n,i){var a=_objectSpread$a({},o);o=e(o,{type:n,props:t,payload:i});r({state:o,prevState:a})},pendingRequests:createCancelablePromiseList()}}function _typeof$9(e){return _typeof$9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$9(e)}function ownKeys$9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$9(Object(r),!0).forEach((function(t){_defineProperty$9(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$9(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$9(e,t,r){t=_toPropertyKey$9(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return _typeof$9(t)==="symbol"?t:String(t)}function _toPrimitive$9(e,t){if(_typeof$9(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$9(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getAutocompleteSetters(e){var t=e.store;var r=function setActiveItemId(e){t.dispatch("setActiveItemId",e)};var o=function setQuery(e){t.dispatch("setQuery",e)};var n=function setCollections(e){var r=0;var o=e.map((function(e){return _objectSpread$9(_objectSpread$9({},e),{},{items:i(e.items).map((function(e){return _objectSpread$9(_objectSpread$9({},e),{},{__autocomplete_id:r++})}))})}));t.dispatch("setCollections",o)};var a=function setIsOpen(e){t.dispatch("setIsOpen",e)};var u=function setStatus(e){t.dispatch("setStatus",e)};var c=function setContext(e){t.dispatch("setContext",e)};return{setActiveItemId:r,setQuery:o,setCollections:n,setIsOpen:a,setStatus:u,setContext:c}}function _typeof$8(e){return _typeof$8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$8(e)}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if(typeof e==="string")return _arrayLikeToArray$1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);r==="Object"&&e.constructor&&(r=e.constructor.name);return r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function _iterableToArray$1(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _arrayLikeToArray$1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function ownKeys$8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$8(Object(r),!0).forEach((function(t){_defineProperty$8(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$8(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$8(e,t,r){t=_toPropertyKey$8(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return _typeof$8(t)==="symbol"?t:String(t)}function _toPrimitive$8(e,t){if(_typeof$8(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$8(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getDefaultProps(e,t){var r;var o=typeof window!=="undefined"?window:{};var n=e.plugins||[];return _objectSpread$8(_objectSpread$8({debug:false,openOnFocus:false,enterKeyHint:void 0,ignoreCompositionEvents:false,placeholder:"",autoFocus:false,defaultActiveItemId:null,stallThreshold:300,insights:void 0,environment:o,shouldPanelOpen:function shouldPanelOpen(e){var t=e.state;return a(t)>0},reshape:function reshape(e){var t=e.sources;return t}},e),{},{id:(r=e.id)!==null&&r!==void 0?r:u(),plugins:n,initialState:_objectSpread$8({activeItemId:null,query:"",completion:null,collections:[],isOpen:false,status:"idle",context:{}},e.initialState),onStateChange:function onStateChange(t){var r;(r=e.onStateChange)===null||r===void 0?void 0:r.call(e,t);n.forEach((function(e){var r;return(r=e.onStateChange)===null||r===void 0?void 0:r.call(e,t)}))},onSubmit:function onSubmit(t){var r;(r=e.onSubmit)===null||r===void 0?void 0:r.call(e,t);n.forEach((function(e){var r;return(r=e.onSubmit)===null||r===void 0?void 0:r.call(e,t)}))},onReset:function onReset(t){var r;(r=e.onReset)===null||r===void 0?void 0:r.call(e,t);n.forEach((function(e){var r;return(r=e.onReset)===null||r===void 0?void 0:r.call(e,t)}))},getSources:function getSources(r){return Promise.all([].concat(_toConsumableArray$1(n.map((function(e){return e.getSources}))),[e.getSources]).filter(Boolean).map((function(e){return getNormalizedSources(e,r)}))).then((function(e){return i(e)})).then((function(e){return e.map((function(e){return _objectSpread$8(_objectSpread$8({},e),{},{onSelect:function onSelect(r){e.onSelect(r);t.forEach((function(e){var t;return(t=e.onSelect)===null||t===void 0?void 0:t.call(e,r)}))},onActive:function onActive(r){e.onActive(r);t.forEach((function(e){var t;return(t=e.onActive)===null||t===void 0?void 0:t.call(e,r)}))},onResolve:function onResolve(r){e.onResolve(r);t.forEach((function(e){var t;return(t=e.onResolve)===null||t===void 0?void 0:t.call(e,r)}))}})}))}))},navigator:_objectSpread$8({navigate:function navigate(e){var t=e.itemUrl;o.location.assign(t)},navigateNewTab:function navigateNewTab(e){var t=e.itemUrl;var r=o.open(t,"_blank","noopener");r===null||r===void 0?void 0:r.focus()},navigateNewWindow:function navigateNewWindow(e){var t=e.itemUrl;o.open(t,"_blank","noopener")}},e.navigator)})}function _typeof$7(e){return _typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$7(e)}function ownKeys$7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$7(Object(r),!0).forEach((function(t){_defineProperty$7(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$7(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$7(e,t,r){t=_toPropertyKey$7(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return _typeof$7(t)==="symbol"?t:String(t)}function _toPrimitive$7(e,t){if(_typeof$7(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$7(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function reshape(e){var t=e.collections,r=e.props,o=e.state;var n=t.reduce((function(e,t){return _objectSpread$7(_objectSpread$7({},e),{},_defineProperty$7({},t.source.sourceId,_objectSpread$7(_objectSpread$7({},t.source),{},{getItems:function getItems(){return i(t.items)}})))}),{});var a=r.plugins.reduce((function(e,t){return t.reshape?t.reshape(e):e}),{sourcesBySourceId:n,state:o}),u=a.sourcesBySourceId;var c=r.reshape({sourcesBySourceId:u,sources:Object.values(u),state:o});return i(c).filter(Boolean).map((function(e){return{source:e,items:e.getItems()}}))}function _typeof$6(e){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(e)}function ownKeys$6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(r),!0).forEach((function(t){_defineProperty$6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$6(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$6(e,t,r){t=_toPropertyKey$6(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return _typeof$6(t)==="symbol"?t:String(t)}function _toPrimitive$6(e,t){if(_typeof$6(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$6(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);r==="Object"&&e.constructor&&(r=e.constructor.name);return r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function isDescription(e){return Boolean(e.execute)}function isRequesterDescription(e){return Boolean(e===null||e===void 0?void 0:e.execute)}function preResolve(e,t,r){if(isRequesterDescription(e)){var o=e.requesterId==="algolia"?Object.assign.apply(Object,[{}].concat(_toConsumableArray(Object.keys(r.context).map((function(e){var t;return(t=r.context[e])===null||t===void 0?void 0:t.__algoliaSearchParameters}))))):{};return _objectSpread$6(_objectSpread$6({},e),{},{requests:e.queries.map((function(r){return{query:e.requesterId==="algolia"?_objectSpread$6(_objectSpread$6({},r),{},{params:_objectSpread$6(_objectSpread$6({},o),r.params)}):r,sourceId:t,transformResponse:e.transformResponse}}))})}return{items:e,sourceId:t}}function resolve(e){var t=e.reduce((function(e,t){if(!isDescription(t)){e.push(t);return e}var r=t.searchClient,o=t.execute,n=t.requesterId,i=t.requests;var a=e.find((function(e){return isDescription(t)&&isDescription(e)&&e.searchClient===r&&Boolean(n)&&e.requesterId===n}));if(a){var u;(u=a.items).push.apply(u,_toConsumableArray(i))}else{var c={execute:o,requesterId:n,items:i,searchClient:r};e.push(c)}return e}),[]);var r=t.map((function(e){if(!isDescription(e))return Promise.resolve(e);var t=e,r=t.execute,o=t.items,n=t.searchClient;return r({searchClient:n,requests:o})}));return Promise.all(r).then((function(e){return i(e)}))}function postResolve(e,t,n){return t.map((function(t){var i=e.filter((function(e){return e.sourceId===t.sourceId}));var a=i.map((function(e){var t=e.items;return t}));var u=i[0].transformResponse;var c=u?u(mapToAlgoliaResponse(a)):a;t.onResolve({source:t,results:a,items:c,state:n.getState()});o(Array.isArray(c),(function(){return'The `getItems` function from source "'.concat(t.sourceId,'" must return an array of items but returned type ').concat(JSON.stringify(_typeof$6(c)),":\n\n").concat(JSON.stringify(r(c),null,2),".\n\nSee: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems")}));o(c.every(Boolean),'The `getItems` function from source "'.concat(t.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),".\n\nDid you forget to return items?\n\nSee: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems"));return{source:t,items:c}}))}function _typeof$5(e){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(e)}var s=["event","nextState","props","query","refresh","store"];function ownKeys$5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(r),!0).forEach((function(t){_defineProperty$5(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$5(e,t,r){t=_toPropertyKey$5(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return _typeof$5(t)==="symbol"?t:String(t)}function _toPrimitive$5(e,t){if(_typeof$5(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$5(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$2(e,t){if(e==null)return{};var r=_objectWithoutPropertiesLoose$2(e,t);var o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){o=i[n];t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}}return r}function _objectWithoutPropertiesLoose$2(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,i;for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}var p=null;var f=createConcurrentSafePromise();function onInput(e){var t=e.event,r=e.nextState,o=r===void 0?{}:r,n=e.props,i=e.query,a=e.refresh,u=e.store,c=_objectWithoutProperties$2(e,s);p&&n.environment.clearTimeout(p);var l=c.setCollections,y=c.setIsOpen,m=c.setQuery,b=c.setActiveItemId,v=c.setStatus,d=c.setContext;m(i);b(n.defaultActiveItemId);if(!i&&n.openOnFocus===false){var g;var S=u.getState().collections.map((function(e){return _objectSpread$5(_objectSpread$5({},e),{},{items:[]})}));v("idle");l(S);y((g=o.isOpen)!==null&&g!==void 0?g:n.shouldPanelOpen({state:u.getState()}));var _=cancelable(f(S).then((function(){return Promise.resolve()})));return u.pendingRequests.add(_)}v("loading");p=n.environment.setTimeout((function(){v("stalled")}),n.stallThreshold);var j=cancelable(f(n.getSources(_objectSpread$5({query:i,refresh:a,state:u.getState()},c)).then((function(e){return Promise.all(e.map((function(e){return Promise.resolve(e.getItems(_objectSpread$5({query:i,refresh:a,state:u.getState()},c))).then((function(t){return preResolve(t,e.sourceId,u.getState())}))}))).then(resolve).then((function(t){var r=t.some((function(e){var t=e.items;return isSearchResponseWithAutomaticInsightsFlag(t)}));if(r){var o;d({algoliaInsightsPlugin:_objectSpread$5(_objectSpread$5({},((o=u.getState().context)===null||o===void 0?void 0:o.algoliaInsightsPlugin)||{}),{},{__automaticInsights:r})})}return postResolve(t,e,u)})).then((function(e){return reshape({collections:e,props:n,state:u.getState()})}))})))).then((function(e){var r;v("idle");l(e);var s=n.shouldPanelOpen({state:u.getState()});y((r=o.isOpen)!==null&&r!==void 0?r:n.openOnFocus&&!i&&s||s);var p=getActiveItem(u.getState());if(u.getState().activeItemId!==null&&p){var f=p.item,m=p.itemInputValue,b=p.itemUrl,d=p.source;d.onActive(_objectSpread$5({event:t,item:f,itemInputValue:m,itemUrl:b,refresh:a,source:d,state:u.getState()},c))}})).finally((function(){v("idle");p&&n.environment.clearTimeout(p)}));return u.pendingRequests.add(j)}function isSearchResponseWithAutomaticInsightsFlag(e){return!Array.isArray(e)&&Boolean(e===null||e===void 0?void 0:e._automaticInsights)}function _typeof$4(e){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(e)}var y=["event","props","refresh","store"];function ownKeys$4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(r),!0).forEach((function(t){_defineProperty$4(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$4(e,t,r){t=_toPropertyKey$4(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return _typeof$4(t)==="symbol"?t:String(t)}function _toPrimitive$4(e,t){if(_typeof$4(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$4(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$1(e,t){if(e==null)return{};var r=_objectWithoutPropertiesLoose$1(e,t);var o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){o=i[n];t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}}return r}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,i;for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}function onKeyDown(e){var t=e.event,r=e.props,o=e.refresh,n=e.store,i=_objectWithoutProperties$1(e,y);if(t.key==="ArrowUp"||t.key==="ArrowDown"){var a=function triggerScrollIntoView(){var e=getActiveItem(n.getState());var t=r.environment.document.getElementById(getAutocompleteElementId(r.id,"item-".concat(n.getState().activeItemId),e===null||e===void 0?void 0:e.source));t&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(false):t.scrollIntoView(false))};var u=function triggerOnActive(){var e=getActiveItem(n.getState());if(n.getState().activeItemId!==null&&e){var r=e.item,a=e.itemInputValue,u=e.itemUrl,c=e.source;c.onActive(_objectSpread$4({event:t,item:r,itemInputValue:a,itemUrl:u,refresh:o,source:c,state:n.getState()},i))}};t.preventDefault();if(n.getState().isOpen===false&&(r.openOnFocus||Boolean(n.getState().query)))onInput(_objectSpread$4({event:t,props:r,query:n.getState().query,refresh:o,store:n},i)).then((function(){n.dispatch(t.key,{nextActiveItemId:r.defaultActiveItemId});u();setTimeout(a,0)}));else{n.dispatch(t.key,{});u();a()}}else if(t.key==="Escape"){t.preventDefault();n.dispatch(t.key,null);n.pendingRequests.cancelAll()}else if(t.key==="Tab"){n.dispatch("blur",null);n.pendingRequests.cancelAll()}else if(t.key==="Enter"){if(n.getState().activeItemId===null||n.getState().collections.every((function(e){return e.items.length===0}))){r.debug||n.pendingRequests.cancelAll();return}t.preventDefault();var c=getActiveItem(n.getState()),l=c.item,s=c.itemInputValue,p=c.itemUrl,f=c.source;if(t.metaKey||t.ctrlKey){if(p!==void 0){f.onSelect(_objectSpread$4({event:t,item:l,itemInputValue:s,itemUrl:p,refresh:o,source:f,state:n.getState()},i));r.navigator.navigateNewTab({itemUrl:p,item:l,state:n.getState()})}}else if(t.shiftKey){if(p!==void 0){f.onSelect(_objectSpread$4({event:t,item:l,itemInputValue:s,itemUrl:p,refresh:o,source:f,state:n.getState()},i));r.navigator.navigateNewWindow({itemUrl:p,item:l,state:n.getState()})}}else if(t.altKey);else{if(p!==void 0){f.onSelect(_objectSpread$4({event:t,item:l,itemInputValue:s,itemUrl:p,refresh:o,source:f,state:n.getState()},i));r.navigator.navigate({itemUrl:p,item:l,state:n.getState()});return}onInput(_objectSpread$4({event:t,nextState:{isOpen:false},props:r,query:s,refresh:o,store:n},i)).then((function(){f.onSelect(_objectSpread$4({event:t,item:l,itemInputValue:s,itemUrl:p,refresh:o,source:f,state:n.getState()},i))}))}}}function _typeof$3(e){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(e)}var m=["props","refresh","store"],b=["inputElement","formElement","panelElement"],v=["inputElement"],d=["inputElement","maxLength"],g=["source"],S=["item","source"];function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach((function(t){_defineProperty$3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$3(e,t,r){t=_toPropertyKey$3(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return _typeof$3(t)==="symbol"?t:String(t)}function _toPrimitive$3(e,t){if(_typeof$3(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$3(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties(e,t){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,t);var o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){o=i[n];t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}}return r}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,i;for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}function getPropGetters(e){var t=e.props,r=e.refresh,o=e.store,i=_objectWithoutProperties(e,m);var a=function getEnvironmentProps(e){var r=e.inputElement,n=e.formElement,i=e.panelElement,a=_objectWithoutProperties(e,b);function onMouseDownOrTouchStart(e){var a=o.getState().isOpen||!o.pendingRequests.isEmpty();if(a&&e.target!==r){var u=[n,i].some((function(t){return isOrContainsNode(t,e.target)}));if(u===false){o.dispatch("blur",null);t.debug||o.pendingRequests.cancelAll()}}}return _objectSpread$3({onTouchStart:onMouseDownOrTouchStart,onMouseDown:onMouseDownOrTouchStart,onTouchMove:function onTouchMove(e){o.getState().isOpen!==false&&r===t.environment.document.activeElement&&e.target!==r&&r.blur()}},a)};var u=function getRootProps(e){return _objectSpread$3({role:"combobox","aria-expanded":o.getState().isOpen,"aria-haspopup":"listbox","aria-owns":o.getState().isOpen?o.getState().collections.map((function(e){var r=e.source;return getAutocompleteElementId(t.id,"list",r)})).join(" "):void 0,"aria-labelledby":getAutocompleteElementId(t.id,"label")},e)};var c=function getFormProps(e){e.inputElement;var n=_objectWithoutProperties(e,v);return _objectSpread$3({action:"",noValidate:true,role:"search",onSubmit:function onSubmit(n){var a;n.preventDefault();t.onSubmit(_objectSpread$3({event:n,refresh:r,state:o.getState()},i));o.dispatch("submit",null);(a=e.inputElement)===null||a===void 0?void 0:a.blur()},onReset:function onReset(n){var a;n.preventDefault();t.onReset(_objectSpread$3({event:n,refresh:r,state:o.getState()},i));o.dispatch("reset",null);(a=e.inputElement)===null||a===void 0?void 0:a.focus()}},n)};var l=function getInputProps(e){var a;function onFocus(e){(t.openOnFocus||Boolean(o.getState().query))&&onInput(_objectSpread$3({event:e,props:t,query:o.getState().completion||o.getState().query,refresh:r,store:o},i));o.dispatch("focus",null)}var u=e||{},c=(u.inputElement,u.maxLength),l=c===void 0?512:c,s=_objectWithoutProperties(u,d);var p=getActiveItem(o.getState());var f=((a=t.environment.navigator)===null||a===void 0?void 0:a.userAgent)||"";var y=isSamsung(f);var m=t.enterKeyHint||(p!==null&&p!==void 0&&p.itemUrl&&!y?"go":"search");return _objectSpread$3({"aria-autocomplete":"both","aria-activedescendant":o.getState().isOpen&&o.getState().activeItemId!==null?getAutocompleteElementId(t.id,"item-".concat(o.getState().activeItemId),p===null||p===void 0?void 0:p.source):void 0,"aria-controls":o.getState().isOpen?o.getState().collections.map((function(e){var r=e.source;return getAutocompleteElementId(t.id,"list",r)})).join(" "):void 0,"aria-labelledby":getAutocompleteElementId(t.id,"label"),value:o.getState().completion||o.getState().query,id:getAutocompleteElementId(t.id,"input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:m,spellCheck:"false",autoFocus:t.autoFocus,placeholder:t.placeholder,maxLength:l,type:"search",onChange:function onChange(e){var n=e.currentTarget.value;t.ignoreCompositionEvents&&getNativeEvent(e).isComposing?i.setQuery(n):onInput(_objectSpread$3({event:e,props:t,query:n.slice(0,l),refresh:r,store:o},i))},onCompositionEnd:function onCompositionEnd(e){onInput(_objectSpread$3({event:e,props:t,query:e.currentTarget.value.slice(0,l),refresh:r,store:o},i))},onKeyDown:function onKeyDown$1(e){getNativeEvent(e).isComposing||onKeyDown(_objectSpread$3({event:e,props:t,refresh:r,store:o},i))},onFocus:onFocus,onBlur:n,onClick:function onClick(r){e.inputElement!==t.environment.document.activeElement||o.getState().isOpen||onFocus(r)}},s)};var s=function getLabelProps(e){return _objectSpread$3({htmlFor:getAutocompleteElementId(t.id,"input"),id:getAutocompleteElementId(t.id,"label")},e)};var p=function getListProps(e){var r=e||{},o=r.source,n=_objectWithoutProperties(r,g);return _objectSpread$3({role:"listbox","aria-labelledby":getAutocompleteElementId(t.id,"label"),id:getAutocompleteElementId(t.id,"list",o)},n)};var f=function getPanelProps(e){return _objectSpread$3({onMouseDown:function onMouseDown(e){e.preventDefault()},onMouseLeave:function onMouseLeave(){o.dispatch("mouseleave",null)}},e)};var y=function getItemProps(e){var n=e.item,a=e.source,u=_objectWithoutProperties(e,S);return _objectSpread$3({id:getAutocompleteElementId(t.id,"item-".concat(n.__autocomplete_id),a),role:"option","aria-selected":o.getState().activeItemId===n.__autocomplete_id,onMouseMove:function onMouseMove(e){if(n.__autocomplete_id!==o.getState().activeItemId){o.dispatch("mousemove",n.__autocomplete_id);var t=getActiveItem(o.getState());if(o.getState().activeItemId!==null&&t){var a=t.item,u=t.itemInputValue,c=t.itemUrl,l=t.source;l.onActive(_objectSpread$3({event:e,item:a,itemInputValue:u,itemUrl:c,refresh:r,source:l,state:o.getState()},i))}}},onMouseDown:function onMouseDown(e){e.preventDefault()},onClick:function onClick(e){var u=a.getItemInputValue({item:n,state:o.getState()});var c=a.getItemUrl({item:n,state:o.getState()});var l=c?Promise.resolve():onInput(_objectSpread$3({event:e,nextState:{isOpen:false},props:t,query:u,refresh:r,store:o},i));l.then((function(){a.onSelect(_objectSpread$3({event:e,item:n,itemInputValue:u,itemUrl:c,refresh:r,source:a,state:o.getState()},i))}))}},u)};return{getEnvironmentProps:a,getRootProps:u,getFormProps:c,getLabelProps:s,getInputProps:l,getPanelProps:f,getListProps:p,getItemProps:y}}function _typeof$2(e){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(e)}function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach((function(t){_defineProperty$2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$2(e,t,r){t=_toPropertyKey$2(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return _typeof$2(t)==="symbol"?t:String(t)}function _toPrimitive$2(e,t){if(_typeof$2(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$2(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getMetadata(e){var t,r,o,n;var i=e.plugins,a=e.options;var u=(t=(((r=a.__autocomplete_metadata)===null||r===void 0?void 0:r.userAgents)||[])[0])===null||t===void 0?void 0:t.segment;var l=u?_defineProperty$2({},u,Object.keys(((o=a.__autocomplete_metadata)===null||o===void 0?void 0:o.options)||{})):{};return{plugins:i.map((function(e){return{name:e.name,options:Object.keys(e.__autocomplete_pluginOptions||[])}})),options:_objectSpread$2({"autocomplete-core":Object.keys(a)},l),ua:c.concat(((n=a.__autocomplete_metadata)===null||n===void 0?void 0:n.userAgents)||[])}}function injectMetadata(e){var t,r;var o=e.metadata,n=e.environment;var i=(t=n.navigator)===null||t===void 0||(r=t.userAgent)===null||r===void 0?void 0:r.includes("Algolia Crawler");if(i){var a=n.document.createElement("meta");var u=n.document.querySelector("head");a.name="algolia:metadata";setTimeout((function(){a.content=JSON.stringify(o);u.appendChild(a)}),0)}}function getCompletion(e){var t;var r=e.state;return r.isOpen===false||r.activeItemId===null?null:((t=getActiveItem(r))===null||t===void 0?void 0:t.itemInputValue)||null}function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach((function(t){_defineProperty$1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$1(e,t,r){t=_toPropertyKey$1(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return _typeof$1(t)==="symbol"?t:String(t)}function _toPrimitive$1(e,t){if(_typeof$1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof$1(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _=function stateReducer(e,t){switch(t.type){case"setActiveItemId":return _objectSpread$1(_objectSpread$1({},e),{},{activeItemId:t.payload});case"setQuery":return _objectSpread$1(_objectSpread$1({},e),{},{query:t.payload,completion:null});case"setCollections":return _objectSpread$1(_objectSpread$1({},e),{},{collections:t.payload});case"setIsOpen":return _objectSpread$1(_objectSpread$1({},e),{},{isOpen:t.payload});case"setStatus":return _objectSpread$1(_objectSpread$1({},e),{},{status:t.payload});case"setContext":return _objectSpread$1(_objectSpread$1({},e),{},{context:_objectSpread$1(_objectSpread$1({},e.context),t.payload)});case"ArrowDown":var r=_objectSpread$1(_objectSpread$1({},e),{},{activeItemId:t.payload.hasOwnProperty("nextActiveItemId")?t.payload.nextActiveItemId:getNextActiveItemId(1,e.activeItemId,a(e),t.props.defaultActiveItemId)});return _objectSpread$1(_objectSpread$1({},r),{},{completion:getCompletion({state:r})});case"ArrowUp":var n=_objectSpread$1(_objectSpread$1({},e),{},{activeItemId:getNextActiveItemId(-1,e.activeItemId,a(e),t.props.defaultActiveItemId)});return _objectSpread$1(_objectSpread$1({},n),{},{completion:getCompletion({state:n})});case"Escape":return e.isOpen?_objectSpread$1(_objectSpread$1({},e),{},{activeItemId:null,isOpen:false,completion:null}):_objectSpread$1(_objectSpread$1({},e),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return _objectSpread$1(_objectSpread$1({},e),{},{activeItemId:null,isOpen:false,status:"idle"});case"reset":return _objectSpread$1(_objectSpread$1({},e),{},{activeItemId:t.props.openOnFocus===true?t.props.defaultActiveItemId:null,status:"idle",completion:null,query:""});case"focus":return _objectSpread$1(_objectSpread$1({},e),{},{activeItemId:t.props.defaultActiveItemId,isOpen:(t.props.openOnFocus||Boolean(e.query))&&t.props.shouldPanelOpen({state:e})});case"blur":return t.props.debug?e:_objectSpread$1(_objectSpread$1({},e),{},{isOpen:false,activeItemId:null});case"mousemove":return _objectSpread$1(_objectSpread$1({},e),{},{activeItemId:t.payload});case"mouseleave":return _objectSpread$1(_objectSpread$1({},e),{},{activeItemId:t.props.defaultActiveItemId});default:o(false,"The reducer action ".concat(JSON.stringify(t.type)," is not supported."));return e}};function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t=_toPropertyKey(t);t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return _typeof(t)==="symbol"?t:String(t)}function _toPrimitive(e,t){if(_typeof(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function createAutocomplete(t){checkOptions(t);var r=[];var o=getDefaultProps(t,r);var n=createStore(_,o,onStoreStateChange);var i=getAutocompleteSetters({store:n});var a=getPropGetters(_objectSpread({props:o,refresh:refresh,store:n,navigator:o.navigator},i));function onStoreStateChange(t){var r,n;var a=t.prevState,u=t.state;o.onStateChange(_objectSpread({prevState:a,state:u,refresh:refresh,navigator:o.navigator},i));if(!isAlgoliaInsightsPluginEnabled()&&(r=u.context)!==null&&r!==void 0&&(n=r.algoliaInsightsPlugin)!==null&&n!==void 0&&n.__automaticInsights&&o.insights!==false){var c=e({__autocomplete_clickAnalytics:false});o.plugins.push(c);subscribePlugins([c])}}function refresh(){return onInput(_objectSpread({event:new Event("input"),nextState:{isOpen:n.getState().isOpen},props:o,navigator:o.navigator,query:n.getState().query,refresh:refresh,store:n},i))}function subscribePlugins(e){e.forEach((function(e){var t;return(t=e.subscribe)===null||t===void 0?void 0:t.call(e,_objectSpread(_objectSpread({},i),{},{navigator:o.navigator,refresh:refresh,onSelect:function onSelect(e){r.push({onSelect:e})},onActive:function onActive(e){r.push({onActive:e})},onResolve:function onResolve(e){r.push({onResolve:e})}}))}))}function isAlgoliaInsightsPluginEnabled(){return o.plugins.some((function(e){return e.name==="aa.algoliaInsightsPlugin"}))}if(o.insights&&!isAlgoliaInsightsPluginEnabled()){var u=typeof o.insights==="boolean"?{}:o.insights;o.plugins.push(e(u))}subscribePlugins(o.plugins);injectMetadata({metadata:getMetadata({plugins:o.plugins,options:t}),environment:o.environment});return _objectSpread(_objectSpread({refresh:refresh,navigator:o.navigator},a),i)}export{createAutocomplete,getDefaultProps};

